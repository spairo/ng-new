<div class="breadcrumb">
  <a nav="#!/">Home</a>
</div>
<br />
<div class="row">
  <div class="col-12">
    <ul class="tabs portfolio">
      <li (click)="activeTab = 'banquero'; tabCode = 'B000';" [ngClass]="{current: activeTab === 'banquero'}">
        <span>Mi Portafolio</span>
      </li>
      <li (click)="activeTab = 'default'; tabCode = '0000';" [ngClass]="{current: activeTab === 'default'}">
        <span>Cierres recientes</span>
      </li>
      <li class="add" *ngFor="let tab of tabs; let i = index;" (click)="activeTab = i; tabCode = tab.codigo; portafolioTab(tab.codigo); filterSubjacents();">
        {{tab.name}}
      </li>
      <li class="add" style="background-color: #B3B3B3;" (click)="goNew();">
        <span>Crear portafolio</span>
        <i class="plus tooltip newPlus"></i>
      </li>
      <li class="last" *ngIf="banquero" style="">
        <i class="traffic-loading tooltip">
          <div class="content">
            <div class="txt">Registro de semáforos</div>
          </div>
        </i>
      </li>
    </ul>
    <div *ngIf="activeTab === 'banquero'" class="content-tab">
      <div class="col-9">

        <div class="row">
          <div class="col-5">
            <h1>Listado de emisiones</h1>
          </div>
          <div class="col-4 align-right">
            <h1>Cliente/Contrato</h1>
          </div>
          <div class="col-3 mt-1">
            <mat-form-field>
              <mat-select placeholder="Contrato">
                <mat-option>-</mat-option>
                <mat-option *ngFor="let state of contracts" [value]="state">{{state}}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <div class="row mb-4">
          <div class="col-8">
            <ul class="nav-subjacents">
              <li [ngClass]="{activeTab: subyacenteTab === 'TODO'}" (click)="subyacente = null;">TODO</li>
              <li *ngFor="let subjacent of subjacents; let i = index" (click)="subyacenteFilter = {subyacente: subjacent}; subyacente = subjacent; subyacenteTab = i;"
                ng-class="{activeTab: main.subyacenteTab === i}">{{subjacent.name}}</li>
            </ul>
          </div>
          <div class="col-4 align-right">
            <!--
            <i class="filter mb-10 mr-10" ng-if="main.listed || main.portfolioT.length &gt; 20" ng-class="{on: main.filterPortfolio}"
              ng-click="main.filterPortfolio = !main.filterPortfolio;"></i>-->

            <i class="views" [ngClass]="{list: listed}" (click)="listed = !listed" *ngIf="boxes?.length <= 20"></i>
          </div>
        </div>

        <div class="row">
          <div class="col-12">
            <div class="suggesting"><span class="title">Semáforo de sugerencias</span>
              <div class="lights">
                <div class="col-2 mb-10">
                  <div class="round"></div><span></span>
                </div>
              </div>
              <div class="iconography"><a>Iconografía</a></div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-12" *ngIf="!listed && boxes.length <= 20">
            <div *ngFor="let box of boxes" class="box-portfolio" [ngClass]="{defeated: !box.stActivo}" (click)="detail(box.series, box.id);">
              <div class="title-box">
                <div class="traffic-light tooltip" *ngIf="box.status === '1' || box.status === '3' || box.status === '7'" [ngStyle]="{'background-color': box.semaforo.color}">
                  <div class="content" *ngIf="box.semaforo.comentario !== null">
                    <span>{{ box.semaforo.comentario }}</span>
                  </div>
                </div>
                <span class="serie">{{ box.series }}</span>
                <span class="inline payoff"> {{ box.paymentType }}</span>
                <img *ngIf="box.referenceAssets.length === 3" src="./assets/img/plus.png" />
                <span class="inline actives">{{ box.referenceAssets[0].nbActivo }}</span>
                <span class="inline price"> {{ box.referenceAssets[0].precioActivo }}</span>
                <span class="inline price">{{ box.referenceAssets[0].diferencia }}%</span>
              </div>
              <div class="content-prices">
                <div class="block">
                  <i class="performance" *ngIf="box.priceDifference.amount" [ngClass]="{down: box.priceDifference.amount < 0}"></i>
                  <span class="price" [ngClass]="{down: box.priceDifference.amount < 0, up: box.priceDifference.amount > 0}">{{ box.priceDifference.amount }}</span>
                  <span class="currency" [ngClass]="{down: box.priceDifference.amount < 0, up: box.priceDifference.amount > 0}">{{ box.currency.code }}</span>
                  <span class="performance">
                    <span *ngIf="box.priceDifference.amount > 0">+</span>
                    <span>{{ box.priceDifference.amount }}%</span>
                  </span>
                </div>
                <span class="date">Precio al {{ box.priceDate }}</span>
              </div>
              <div class="content-graphic">
                <canvas baseChart [datasets]="lineChartData" [labels]="lineChartLabels" [options]="lineChartOptions"
                  [legend]="lineChartLegend" [chartType]="lineChartType">
                </canvas>
              </div>
            </div>
          </div>

          <div class="col-12" *ngIf="listed || boxes.length > 20">

          </div>

        </div>
      </div>
      <div class="col-3">
        <new-lateral></new-lateral>
      </div>

    </div>

  </div>
</div>

