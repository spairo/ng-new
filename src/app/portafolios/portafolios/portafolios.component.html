<!--
<div class="breadcrumb">
  <a nav="#!/">Home</a>
</div>
-->
<new-breadcrumb></new-breadcrumb>
<br />
<div class="row">
  <div class="col-12">
    <ul class="tabs portfolio">
      <li (click)="activeTab = 'banquero'; tabCode = 'B000';" [ngClass]="{current: activeTab === 'banquero'}">
        <span>Mi Portafolio</span>
      </li>
      <li (click)="activeTab = 'default'; tabCode = '0000';" [ngClass]="{current: activeTab === 'default'}">
        <span>Cierres recientes</span>
      </li>
      <li class="add" *ngFor="let tab of tabs; let i = index;" (click)="activeTab = i; tabCode = tab.codigo; portafolioTab(tab.codigo); filterSubjacents();">
        {{tab.name}}
      </li>
      <li class="add" style="background-color: #B3B3B3;" (click)="goNew();">
        <span>Crear portafolio</span>
        <i class="plus tooltip newPlus"></i>
      </li>
      <li class="last" *ngIf="banquero" style="">
        <i class="traffic-loading tooltip">
          <div class="content">
            <div class="txt">Registro de semáforos</div>
          </div>
        </i>
      </li>
    </ul>
    <div *ngIf="activeTab === 'banquero'" class="content-tab">
      <div class="col-9">

        <div class="row">
          <div class="col-5">
            <h1>Listado de emisiones</h1>
          </div>
          <div class="col-4 align-right">
            <h1>Cliente/Contrato</h1>
          </div>
          <div class="col-3 mt-1">
            <mat-form-field>
              <mat-select placeholder="Contrato">
                <mat-option>-</mat-option>
                <mat-option *ngFor="let state of contracts" [value]="state">{{state}}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <div class="row mb-4">
          <div class="col-8">
            <ul class="nav-subjacents">
              <li [ngClass]="{activeTab: subyacenteTab === 'TODO'}" (click)="subyacente = null;">TODO</li>
              <li *ngFor="let subjacent of subjacents; let i = index" (click)="subyacenteFilter = {subyacente: subjacent}; subyacente = subjacent; subyacenteTab = i;"
                ng-class="{activeTab: main.subyacenteTab === i}">{{subjacent.name}}</li>
            </ul>
          </div>
          <div class="col-4 align-right">
            <!--
            <i class="filter mb-10 mr-10" ng-if="main.listed || main.portfolioT.length &gt; 20" ng-class="{on: main.filterPortfolio}"
              ng-click="main.filterPortfolio = !main.filterPortfolio;"></i>-->
            <i class="views" [ngClass]="{list: listed}" (click)="listed = !listed" *ngIf="boxesgrid?.length <= 20"></i>
          </div>
        </div>

        <div class="row">
          <div class="col-12">
            <div class="suggesting"><span class="title">Semáforo de sugerencias</span>
              <div class="lights">
                <div class="col-2 mb-10">
                  <div class="round"></div><span></span>
                </div>
              </div>
              <div class="iconography"><a>Iconografía</a></div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-12" *ngIf="!listed && boxes?.length <= 20">
            <div *ngFor="let box of boxes" class="box-portfolio" [ngClass]="{defeated: !box.stActivo}" (click)="detail(box.series, box.id);">
              <div class="title-box">
                <div class="traffic-light tooltip" *ngIf="box.status === '1' || box.status === '3' || box.status === '7'" [ngStyle]="{'background-color': box.semaforo.color}">
                  <div class="content" *ngIf="box.semaforo.comentario !== null">
                    <span>{{ box.semaforo.comentario }}</span>
                  </div>
                </div>
                <span class="serie">{{ box.series }}</span>
                <span class="inline payoff"> {{ box.paymentType }}</span>
                <img *ngIf="box.referenceAssets.length === 3" src="./assets/img/plus.png" />
                <span class="inline actives">{{ box.referenceAssets[0].nbActivo }}</span>
                <span class="inline price"> {{ box.referenceAssets[0].precioActivo }}</span>
                <span class="inline price">{{ box.referenceAssets[0].diferencia }}%</span>
              </div>
              <div class="content-prices">
                <div class="block">
                  <i class="performance" *ngIf="box.priceDifference.amount" [ngClass]="{down: box.priceDifference.amount < 0}"></i>
                  <span class="price" [ngClass]="{down: box.priceDifference.amount < 0, up: box.priceDifference.amount > 0}">{{ box.priceDifference.amount }}</span>
                  <span class="currency" [ngClass]="{down: box.priceDifference.amount < 0, up: box.priceDifference.amount > 0}">{{ box.currency.code }}</span>
                  <span class="performance" [ngClass]="{down: box.priceDifference.amount < 0, up: box.priceDifference.amount > 0}">
                    <span *ngIf="box.priceDifference.amount > 0">+</span>
                    <span>{{ box.priceDifference.amount }}%</span>
                  </span>
                </div>
                <span class="date">Precio al {{ box.priceDate }}</span>
              </div>
              <div class="content-graphic">
                <canvas baseChart [datasets]="lineChartData" [labels]="lineChartLabels" [options]="lineChartOptions"
                  [legend]="lineChartLegend" [chartType]="lineChartType">
                </canvas>
              </div>

              <div class="footer">
                <!--
                <div class="col-7 icons"><span>.</span><a class="tooltip" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'DEU' &amp;&amp; box.detallePayOff.cdComplejidad === 'A' &amp;&amp; box.detallePayOff.plazo == 'LP'"><img src="./assets/icons/caracteristicas/ico_lp_alta_deuda_gris.svg"/><span class="complex">Deuda / Alta complejidad / Largo Plazo</span></a><a class="tooltip" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'DEU' &amp;&amp; box.detallePayOff.cdComplejidad === 'A' &amp;&amp; box.detallePayOff.plazo == 'CP'"><img src="./assets/icons/caracteristicas/ico_cp_alta_deuda_gris.svg"/><span class="complex">Deuda / Alta complejidad / Corto Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'DIV' &amp;&amp; box.detallePayOff.cdComplejidad === 'A' &amp;&amp; box.detallePayOff.plazo == 'LP'"><img src="./assets/icons/caracteristicas/ico_lp_alta_divisas_gris.svg"/><span class="complex">Divisas / Alta complejidad / Largo Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'DIV' &amp;&amp; box.detallePayOff.cdComplejidad === 'A' &amp;&amp; box.detallePayOff.plazo == 'CP'"><img src="./assets/icons/caracteristicas/ico_cp_alta_divisas_gris.svg"/><span class="complex">Divisas / Alta complejidad / Corto Plazo</span></a><a class="tooltip" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'RV' &amp;&amp; box.detallePayOff.cdComplejidad === 'A' &amp;&amp; box.detallePayOff.plazo == 'LP'"><img src="./assets/icons/caracteristicas/ico_lp_alta_renta_gris.svg"/><span class="complex">Renta / Alta complejidad / Largo Plazo</span></a><a class="tooltip" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'RV' &amp;&amp; box.detallePayOff.cdComplejidad === 'A' &amp;&amp; box.detallePayOff.plazo == 'CP'"><img src="./assets/icons/caracteristicas/ico_cp_alta_renta_gris.svg"/><span class="complex">Renta / Alta complejidad / Corto Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'DEU' &amp;&amp; box.detallePayOff.cdComplejidad === 'M' &amp;&amp; box.detallePayOff.plazo == 'LP'"><img src="./assets/icons/caracteristicas/ico_lp_media_deuda_gris.svg"/><span class="complex">Deuda / Mediana complejidad / Largo Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'DEU' &amp;&amp; box.detallePayOff.cdComplejidad === 'M' &amp;&amp; box.detallePayOff.plazo == 'CP'"><img src="./assets/icons/caracteristicas/ico_cp_media_deuda_gris.svg"/><span class="complex">Deuda / Mediana complejidad / Corto Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'DIV' &amp;&amp; box.detallePayOff.cdComplejidad === 'M' &amp;&amp; box.detallePayOff.plazo == 'LP'"><img src="./assets/icons/caracteristicas/ico_lp_media_divisas_gris.svg"/><span class="complex">Divisas / Mediana complejidad / Largo Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'DIV' &amp;&amp; box.detallePayOff.cdComplejidad === 'M' &amp;&amp; box.detallePayOff.plazo == 'CP'"><img src="./assets/icons/caracteristicas/ico_cp_media_divisas_gris.svg"/><span class="complex">Divisas / Mediana complejidad / Corto Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'RV' &amp;&amp; box.detallePayOff.cdComplejidad === 'M' &amp;&amp; box.detallePayOff.plazo == 'LP'"><img src="./assets/icons/caracteristicas/ico_lp_media_renta_gris.svg"/><span class="complex">Renta / Mediana complejidad / Largo Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'RV' &amp;&amp; box.detallePayOff.cdComplejidad === 'M' &amp;&amp; box.detallePayOff.plazo == 'CP'"><img src="./assets/icons/caracteristicas/ico_cp_media_renta_gris.svg"/><span class="complex">Renta / Mediana complejidad / Corto Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'DEU' &amp;&amp; box.detallePayOff.cdComplejidad === 'B' &amp;&amp; box.detallePayOff.plazo == 'LP'"><img src="./assets/icons/caracteristicas/ico_lp_baja_deuda_gris.svg"/><span class="complex">Deuda / Baja complejidad / Largo Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'DEU' &amp;&amp; box.detallePayOff.cdComplejidad === 'B' &amp;&amp; box.detallePayOff.plazo == 'CP'"><img src="./assets/icons/caracteristicas/ico_cp_baja_deuda_gris.svg"/><span class="complex">Deuda / Baja complejidad / Corto Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'DIV' &amp;&amp; box.detallePayOff.cdComplejidad === 'B' &amp;&amp; box.detallePayOff.plazo == 'LP'"><img src="./assets/icons/caracteristicas/ico_lp_baja_divisas_gris.svg"/><span class="complex">Divisas / Baja complejidad / Largo Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'DIV' &amp;&amp; box.detallePayOff.cdComplejidad === 'B' &amp;&amp; box.detallePayOff.plazo == 'CP'"><img src="./assets/icons/caracteristicas/ico_cp_baja_divisas_gris.svg"/><span class="complex">Divisas / Baja complejidad / Corto Plazo</span></a><a class="tooltip" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'RV' &amp;&amp; box.detallePayOff.cdComplejidad === 'B' &amp;&amp; box.detallePayOff.plazo == 'LP'"><img src="./assets/icons/caracteristicas/ico_lp_baja_renta_gris.svg"/><span class="complex">Renta / Baja complejidad / Largo Plazo</span></a><a class="tooltip" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'RV' &amp;&amp; box.detallePayOff.cdComplejidad === 'B' &amp;&amp; box.detallePayOff.plazo == 'CP'"><img src="./assets/icons/caracteristicas/ico_cp_baja_renta_gris.svg"/><span class="complex">Renta / Baja complejidad / Corto Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'DEU' &amp;&amp; box.detallePayOff.cdComplejidad === 'MB' &amp;&amp; box.detallePayOff.plazo == 'LP'"><img src="./assets/icons/caracteristicas/ico_lp_muybaja_deuda_gris.svg"/><span class="complex">Deuda / Muy baja complejidad / Largo Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'DEU' &amp;&amp; box.detallePayOff.cdComplejidad === 'MB' &amp;&amp; box.detallePayOff.plazo == 'CP'"><img src="./assets/icons/caracteristicas/ico_cp_muybaja_deuda_gris.svg"/><span class="complex">Deuda / Muy baja complejidad / Corto Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'DIV' &amp;&amp; box.detallePayOff.cdComplejidad === 'MB' &amp;&amp; box.detallePayOff.plazo == 'LP'"><img src="./assets/icons/caracteristicas/ico_lp_muybaja_divisas_gris.svg"/><span class="complex">Divisas / Muy baja complejidad / Largo Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'DIV' &amp;&amp; box.detallePayOff.cdComplejidad === 'MB' &amp;&amp; box.detallePayOff.plazo == 'CP'"><img src="./assets/icons/caracteristicas/ico_cp_muybaja_divisas_gris.svg"/><span class="complex">Divisas / Muy baja complejidad / Corto Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'RV' &amp;&amp; box.detallePayOff.cdComplejidad === 'MB' &amp;&amp; box.detallePayOff.plazo == 'LP'"><img src="./assets/icons/caracteristicas/ico_lp_muybaja_renta_gris.svg"/><span class="complex">Renta / Muy baja complejidad / Largo Plazo</span></a><a class="tooltip triple" ng-if="box.detallePayOff.grupoSubyacente.cdCatalogo === 'RV' &amp;&amp; box.detallePayOff.cdComplejidad === 'MB' &amp;&amp; box.detallePayOff.plazo == 'CP'"><img src="./assets/icons/caracteristicas/ico_cp_muybaja_renta_gris.svg"/><span class="complex">Renta / Muy baja complejidad / Corto Plazo</span></a><a class="tooltip simple" ng-if="box.detallePayOff.capitalProtegido === 100"><img src="./assets/icons/caracteristicas/ico_capitalvencimiento_gris.svg"/><span>Sin pérdida de capital</span></a><a class="tooltip" ng-if="box.detallePayOff.capitalProtegido &lt; 100 &amp;&amp; box.detallePayOff.capitalProtegido !== 0"><img src="./assets/icons/caracteristicas/ico_capitalprotegido_gris.svg"/><span>Protección de capital a vencimiento</span></a><a class="tooltip" ng-if="box.detallePayOff.volatilidad"><img src="./assets/icons/caracteristicas/ico_volatilidad_gris.svg"/><span>Alta volatilidad de precios</span></a><a class="tooltip simple" ng-if="box.detallePayOff.liquidez"><img src="./assets/icons/caracteristicas/ico_liquidez_gris.svg"/><span>Poca liquidez</span></a><a class="tooltip simple sbpp" ng-if="box.detallePayOff.cdCaracteristicaBpp == 'GF'">
                    <p class="bpp">GF</p><span>Generación de flujo</span></a><a class="tooltip simple sbpp" ng-if="box.detallePayOff.cdCaracteristicaBpp == 'C'">
                    <p class="bpp">C</p><span>Crecimiento</span></a><a class="tooltip simple sbpp" ng-if="box.detallePayOff.cdCaracteristicaBpp == 'PC'">
                    <p class="bpp">PC</p><span>Protección de capital</span></a>
                </div>
                -->
                <div class="align-right">
                  <span class="date" [ngClass]="{expiration: expirateDay}" *ngIf="box.stActivo">
                    <span class="inline" *ngIf="box.status === '1' || box.status === '3' || box.estatus === '7'">Vence: {{box.dueDate}}</span>
                  </span>
                  <span class="date" [ngClass]="{expiration: expirateDay}" *ngIf="!box.stActivo">
                    <span class="inline" *ngIf="box.status === '4'">Venció: {{ box.dueDate }}</span>
                    <span class="inline" *ngIf="box.status === '5'">Amortizó: {{ box.dueDate }}</span>
                    <span class="inline" *ngIf="box.status === '6'">Canceló: {{ box.dueDate }}</span>
                  </span>
                </div>
              </div>

            </div>
          </div>

          <div class="col-12" *ngIf="listed">

          </div>

        </div>
      </div>
      <div class="col-3">
        <new-lateral></new-lateral>
      </div>

    </div>

  </div>
</div>

